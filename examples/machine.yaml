apiVersion: karpenter.sh/v1alpha5
kind: Machine
metadata:
  name: heba-gpu-ap
  labels:
    karpenter.sh/provisioner-name: default
spec:
  machineTemplateRef:
    name: gpuap
  requirements:
  - key: karpenter.k8s.azure/sku-storage-premium-capable
    operator: In
    values:
    - "true"
  - key: node.kubernetes.io/instance-type
    operator: In
    values:
    - Standard_NC6
    - Standard_NC12
    - Standard_NC24
    - Standard_NC24r
    - Standard_NC6s_v2
    - Standard_NC12s_v2
    - Standard_NC24s_v2
    - Standard_NC24rs_v2
    - Standard_NC6s_v3
    - Standard_NC12s_v3
    - Standard_NC24s_v3
    - Standard_NC24rs_v3
    - Standard_ND6s
    - Standard_ND12s
    - Standard_ND24s
    - Standard_ND24rs
    - Standard_NV6
    - Standard_NV12
    - Standard_NV24
  - key: karpenter.sh/provisioner-name
    operator: In
    values:
    - default
  - key: kubernetes.io/arch
    operator: In
    values:
    - amd64
  - key: karpenter.k8s.azure/sku-networking-accelerated
    operator: In
    values:
    - "true"
  - key: kubernetes.io/os
    operator: In
    values:
    - linux
  resources:
    requests:
      cpu: 2310m
      memory: 725280Ki
      pods: "7"
  tolerations:
    - key: "sku"
      operator: "Equal"
      value: "gpu"
      effect: "NoSchedule"

status:
